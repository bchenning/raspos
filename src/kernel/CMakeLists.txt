if(DEFINED ARM)
    set(ISA_DIR "${CMAKE_CURRENT_LIST_DIR}/arm")
else()
    set(ISA_DIR "${CMAKE_CURRENT_LIST_DIR}/aarch64")
endif()

set(CMAKE_TOOLCHAIN_FILE "${ISA_DIR}/toolchain.cmake" PARENT_SCOPE)
include("${ISA_DIR}/flags.cmake")

file(GLOB ISA_KERNEL_SRCS "${ISA_DIR}/*.c" "${ISA_DIR}/*.S")
set(LINK_LAYOUT "${ISA_DIR}/layout.lds" PARENT_SCOPE)

file(GLOB GENERIC_KERNEL_SRCS "${CMAKE_CURRENT_LIST_DIR}/*.c")

set(KERNEL_SRCS "${GENERIC_KERNEL_SRCS}" "${ISA_KERNEL_SRCS}" PARENT_SCOPE)
